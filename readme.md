# 基于chainsql的考勤记录系统

[toc]

MySQL
=====

- 数据库概念

  数据库（存数据） DB DataBase  
  作用：存数据和处理数据  
  概念：数据仓库，软件，安装在操作系统上 SQL 500万以上单独优化

- 数据库分类

  关系型数据库：
  · MySQL

# 客户端结构（登陆->主界面）

## *登陆*

### 学生登陆（选择学生按钮）

1. 输入账号 密码 确认登陆（与服务器建立websocket联系）
2. 向服务器传递message信息（包含学生账号 密码）
3. 服务器确认账号密码是否正确（数据库查询）
4. 服务器返回账号密码（message success/error）
5. 客户端接收message（登入主界面，关闭登陆窗口）
6. 进入主界面

### 教师登陆（选择教师按钮）

1. 输入账号 密码 确认登陆（与服务器建立websocket联系）
2. 向服务器传递message信息（包含学生账号 密码）
3. 服务器确认账号密码是否正确（数据库查询）
4. 服务器返回账号密码（message success/error）
5. 客户端接收message（登入主界面，关闭登陆窗口）
6. 进入主界面

### 注册

客户端不设置注册选项

## *主界面*

### 学生界面（每秒向服务器提交请求更新面板）

1. 签到按钮（向服务器提交签到请求，更新当前状态）
> - 按照安排，当前只能存在一个签到任务（只设置一个签到按钮 忽视出现课程冲突的情况或者均签到）
>
2. 状态面板
> 显示当前状态（空闲、上课中）
>
> 签到状态（无签到、已签到、未签到、未有签到任务）
>
> 显示学生基本信息（姓名 学号 班级 当前课程）

3. 查看签到历史

> - 按老师区分查询
> - 按时间序列查询


### 日历（用于安排课程表）


# 基础信息 info

## 学生

> Student_info
> - 姓名 20
> - 学号 11
> - 班级 7
> - 课程表 list
    >   - 课程名称 20
>   - 课程id 20
>   - 课程时间 list
>   - 起始时间
>   - 终止时间
>

## 老师

> Teacher_info
>

# 服务器架构

## 服务器响应

### 事件

1.  登陆服务器

> - 登陆信息接收
> - 账号信息发放

2.  签到、签退
> 发送签到信息
>
> 返回签到确认信息

3. 入网
> - 分配一个公私钥
> - 存入数据库中
> - 与账号进行绑定

4. 处理签到、签退
> 发送发起信息（所属班级）
>
> 向所有有关人发送签到信息（带声音提示）
>
5. 查询
> 1. 考勤记录查询
> 2. 考勤人员查询（是否签到）
> 3. 考勤资料导出

## 数据库结构

> 学生信息表 保存学生信息用于登陆验证，以及个人签到情况查询
>
> 签到索引表 用于保存所有签到表索引，可按授课教师 课程索引查询
>
> 签到表 保存单个签到所有成员信息 可以查询各个成员的签到情况
>
> 教师信息表 保存教师信息 用于登陆验证，以及学生签到情况查询

#### 学生信息表 StuTable
> - 学号 id
> - 姓名 name
> - 行政班级 classId
> - 登陆密码 password
> - 签到索引列表 tableIndex

#### 签到表索引
> - 时间 time
> - 签到索引 index
> - 发起者 author
> - 课程索引
> - 签到名单索引 sign
>

#### 签到表

> - 签到时间 signInTime（详细时间 或 无）
> - 签到人基本信息 signInMember
>   - 姓名
>   - 学号
> - 签到状态 signInStatus （Bool）
>

####　个人签到表 personal_id
> - 签到时间
> - 签到发起人
> - 签到状态
> - 
#### 教师信息表 TehTable
> - 工号 id
> - 姓名 name
> - 密码 password
> - 签到索引列表



## chainSQL

依chainSQL教程进行搭建 各个节点设置数据库

## 后台操作

### 数据库操作

- 创建新用户（老师、学生）
- 查询所有表


